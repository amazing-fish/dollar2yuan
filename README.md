# dollar2yuan
## 美元兑人民币汇率查看工具
### 特点
- 使用api获取汇率数据
- 直接查找近x天的历史
- 使用echarts和tkinter可视化
### 展示:
- 近十年每月的汇率折线图

![echarts](https://github.com/amazing-fish/dollar2yuan/assets/71763696/464fbc31-24d7-4bba-9122-b0b00fe96327)

## 凭证配置方式

在启动桌面应用前，需要先准备好 [Alpha Vantage](https://www.alphavantage.co/documentation/#fx-daily) 提供的 `API Key`：

1. **环境变量方式**（推荐）：

   ```bash
   export ALPHAVANTAGE_API_KEY="你的apikey"
   python main.py
   ```

2. **`.env` 文件方式**：在项目根目录创建 `.env`（或复制 `.env.example`）并填入内容，程序启动时会自动读取：

   ```env
   ALPHAVANTAGE_API_KEY=你的apikey
   # 可选：调整请求窗口大小（compact/full）
   # ALPHAVANTAGE_OUTPUTSIZE=compact
   ```

   若需在其他环境中复用，也可以搭配 `python-dotenv` 等工具在运行前自动加载。

3. **界面手动输入**：运行程序后，可直接在界面顶部的输入框中填写 `API Key`，并按需选择 `Output Size`（`compact` 为最新 100 个交易日，`full` 为全部历史）。点击“查询”按钮即可保存于当前会话。

Alpha Vantage 免费额度为 **每分钟 5 次请求、每天 500 次请求**。若超过额度，API 会返回 `Note` 提示，需要等待额度刷新后再试。

若凭证未配置或输入，程序会提示用户补全信息。

5. **确认结果并运行测试**：完成所有冲突处理后，再次执行 `git status` 确保干净，然后运行项目测试或关键脚本确认行为正常。

通过以上步骤即可系统性地解决冲突，避免遗漏或引入新的问题。

## TODO 概览（未来扩展思路）

1. 支持多种货币对（如欧元兑人民币）并允许用户自定义组合。
2. 引入批量请求与缓存策略，减少频繁查询时的 API 调用次数。
3. 提供离线模式，从本地缓存或导入的 CSV 数据中展示历史曲线。
4. 增加自动刷新功能，定期更新实时汇率并提醒用户。
5. 实现汇率波动告警，允许设定阈值并通过桌面通知或邮件提醒。
6. 集成更多图表类型（K 线、蜡烛图、热力图等），丰富可视化效果。
7. 在界面中提供数据导出功能，可一键导出 CSV、Excel 或图像。
8. 支持自定义日期范围与粒度（日、周、月、季度等）。
9. 添加数据清洗与异常检测，标记或剔除缺失、异常值。
10. 引入多语言界面，方便不同地区用户使用。
11. 开放插件接口，允许扩展其他数据源或指标计算模块。
12. 集成简单的技术指标（均线、MACD、RSI 等）辅助分析。
13. 支持命令行模式，方便自动化脚本或服务器环境使用。
14. 在桌面应用中引入主题切换（深色 / 浅色）。
15. 为移动端或网页端构建响应式前端界面。
16. 增加用户偏好存储功能，自动记住上次查询配置。
17. 集成日志记录与诊断页面，便于定位网络或数据问题。
18. 提供历史汇率对比工具，可同时展示多个年份或事件期间的数据。
19. 引入机器学习模型，预测未来短期汇率趋势并给出置信区间。
20. 编写自动化测试与持续集成脚本，保障各模块的稳定性。
