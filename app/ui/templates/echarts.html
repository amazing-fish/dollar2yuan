<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="UTF-8">
    <title>${title}</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.0.2/echarts.min.js"></script>
    <style>
        body {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
            font-family: "Segoe UI", "Helvetica Neue", sans-serif;
            background: linear-gradient(180deg, #f5f7fa 0%, #ffffff 100%);
        }

        header {
            padding: 16px 24px;
            background-color: rgba(44, 62, 80, 0.9);
            color: #fff;
            font-size: 18px;
            letter-spacing: 1px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        #main {
            flex: 1 1 auto;
            padding: 16px;
        }
    </style>
</head>
<body>
<header>${title}</header>
<div id="main"></div>
<script type="text/javascript">
    const chart = echarts.init(document.getElementById('main'), '${theme}');
    const option = ${option_json};

    chart.setOption(option);

    chart.on('legendselectchanged', function (params) {
        if (params.name === '振幅（%）') {
            const selected = params.selected['振幅（%）'];
            const currentOption = chart.getOption();
            if (currentOption.yAxis && currentOption.yAxis[1]) {
                currentOption.yAxis[1].show = !!selected;
                currentOption.yAxis[1].splitLine = currentOption.yAxis[1].splitLine || {};
                currentOption.yAxis[1].splitLine.show = !!selected;
                chart.setOption({
                    yAxis: currentOption.yAxis
                });
            }
        }
    });

    window.addEventListener('resize', function () {
        chart.resize();
    });
</script>
</body>
</html>
